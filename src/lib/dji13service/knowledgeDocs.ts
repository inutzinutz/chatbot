export interface KnowledgeDoc {
  id: number;
  title: string;
  content: string;
  triggers: string[];
  tags: string[];
}

export const knowledgeDocs: KnowledgeDoc[] = [
  {
    id: 301,
    title: "คู่มือขึ้นทะเบียนโดรน กสทช. ฉบับสมบูรณ์",
    triggers: ["ขึ้นทะเบียน", "ลงทะเบียน", "กสทช", "nbtc", "ทะเบียนโดรน", "register"],
    tags: ["กสทช.", "register", "nbtc", "drone"],
    content:
      "คู่มือขึ้นทะเบียนโดรน กสทช.\n\nโดรนที่ต้องขึ้นทะเบียน:\n- น้ำหนัก 250 กรัมขึ้นไป\n- ใช้งานนอกพื้นที่ส่วนตัว\n\nเอกสารที่ต้องใช้:\n1. สำเนาบัตรประชาชน\n2. Serial Number โดรน\n3. รูปถ่ายโดรน 4 ด้าน\n4. ใบเสร็จ/Invoice ซื้อโดรน\n\nขั้นตอน:\n1. เข้าเว็บ drone.nbtc.go.th\n2. กดลงทะเบียน/สร้างบัญชี\n3. กรอกข้อมูลส่วนตัว\n4. เพิ่มโดรน → ใส่ S/N และรายละเอียด\n5. แนบเอกสาร\n6. ยืนยัน → รอ 3-5 วันทำการ\n7. รับอีเมล/แจ้งเตือน → ดาวน์โหลด QR Code\n8. พิมพ์ QR Code ติดที่โดรน (ขนาดไม่เล็กกว่า 1x1 ซม.)\n\nหมายเหตุ:\n- ขึ้นทะเบียนได้หลายเครื่องต่อบัญชี\n- ถ้าโดรนสูญหาย ต้องแจ้ง กสทช. ภายใน 7 วัน\n- ค่าธรรมเนียมราชการ: ฟรี\n\nต้องการให้ทีมช่วยดำเนินการ LINE @dji13service",
  },
  {
    id: 302,
    title: "คู่มือการขอ RPL (Remote Pilot License) จาก CAAT",
    triggers: ["rpl", "caat", "ใบอนุญาต", "บินพาณิชย์", "นักบินโดรน", "remote pilot"],
    tags: ["caat", "rpl", "license", "commercial"],
    content:
      "คู่มือการขอ RPL จาก CAAT\n\nใครต้องมี RPL:\n- บินรับเงิน (ถ่ายภาพ วิดีโอ สำรวจ)\n- ให้บริการโดรน\n- บินในพื้นที่ควบคุม\n\nขั้นตอนขอ RPL:\n\nStep 1 — ภาคทฤษฎี:\n1. ลงทะเบียน CAAT LMS (lms.aviation.go.th)\n2. เรียนหลักสูตร (ประมาณ 20-40 ชั่วโมง)\n3. สอบ Online\n4. รับ Certificate ภาคทฤษฎี\n\nStep 2 — ภาคปฏิบัติ:\n1. เลือก FTO (Flight Training Organization) ที่ CAAT รับรอง\n2. ฝึกบิน ขั้นต่ำตามที่กำหนด\n3. บันทึก Log Book ชั่วโมงบิน\n4. สอบภาคปฏิบัติกับ DCA Examiner\n\nStep 3 — ยื่นขอ RPL:\n1. กรอกแบบฟอร์ม CAAT-REG-ANS-004\n2. แนบ Certificate ทฤษฎี + Log Book + ผลสอบ\n3. แนบใบรับรองแพทย์ (Class 2 หรือ Self-Declaration)\n4. ยื่นที่ CAAT หรือทางออนไลน์\n5. ชำระค่าธรรมเนียม\n6. รอ RPL (15-30 วันทำการ)\n\nค่าใช้จ่ายโดยประมาณ:\n- ค่าหลักสูตร FTO: 2,500-8,000 บาท\n- ค่าสมัครสอบ: ~500 บาท\n- ค่าออก RPL: ~500 บาท\n\nอายุ RPL: 2 ปี (ต้องต่ออายุก่อนหมด 90 วัน)",
  },
  {
    id: 303,
    title: "กฎหมายการบินโดรนในไทย — สรุปสำคัญ",
    triggers: ["กฎหมาย", "กฎ", "regulation", "ห้ามบิน", "no fly", "บทลงโทษ", "ปรับ"],
    tags: ["กฎหมาย", "regulation", "no-fly-zone", "penalty"],
    content:
      "กฎหมายการบินโดรนในไทย\n\nกฎหมายหลัก:\n- พ.ร.บ.การเดินอากาศ พ.ศ. 2497 (แก้ไข)\n- ประกาศ กพท. เรื่อง UAV\n- ประกาศ กสทช. เรื่องโทรคมนาคม\n\nข้อกำหนดพื้นฐาน:\n- ห้ามบินสูงเกิน 300 ฟุต (90 ม.) เหนือพื้นดิน\n- ห้ามบินใกล้สนามบินในรัศมี 9 กม.\n- ห้ามบินในเขตพระราชฐาน\n- ห้ามบินเหนือฝูงชน\n- ห้ามบินกลางคืน (ยกเว้นมีใบอนุญาต)\n- ต้องอยู่ในสายตาตลอดเวลา (VLOS)\n\nพื้นที่หวงห้าม (No-Fly Zone):\n- สนามบินทุกแห่ง + รัศมี 9 กม.\n- พระราชวัง ทำเนียบรัฐบาล\n- โรงพยาบาล / สถานพยาบาล\n- โรงไฟฟ้า / สิ่งสาธารณูปโภคสำคัญ\n- พื้นที่ชุมนุมประชาชน\n\nบทลงโทษ:\n- บินโดยไม่ขึ้นทะเบียน กสทช.: ปรับไม่เกิน 40,000 บาท\n- บินในพื้นที่หวงห้าม: ปรับไม่เกิน 40,000 บาท / จำคุก\n- บินเชิงพาณิชย์ไม่มี RPL: ปรับไม่เกิน 40,000 บาท\n\nตรวจสอบพื้นที่บิน:\n- แอป AirMap\n- แอป Drone Thailand\n- เว็บ aviation.go.th",
  },
  {
    id: 304,
    title: "ตารางโดรน DJI ที่ต้องขึ้นทะเบียน กสทช.",
    triggers: ["mini 4 pro", "mini 3", "air 3", "air 2s", "mavic 3", "avata", "phantom", "รุ่นไหนต้องขึ้น", "ต้องขึ้นทะเบียนไหม"],
    tags: ["กสทช.", "รุ่น", "น้ำหนัก", "ขึ้นทะเบียน"],
    content:
      "ตารางโดรน DJI — ต้องขึ้นทะเบียน กสทช. ไหม\n\nไม่ต้องขึ้นทะเบียน (น้ำหนัก < 250 กรัม):\n- DJI Mini 4 Pro: 249 กรัม ✗ ไม่ต้อง\n- DJI Mini 3: 248 กรัม ✗ ไม่ต้อง\n- DJI Mini 3 Pro: 249 กรัม ✗ ไม่ต้อง\n- DJI Mini 2 SE: 249 กรัม ✗ ไม่ต้อง\n\nต้องขึ้นทะเบียน (น้ำหนัก ≥ 250 กรัม):\n- DJI Air 3: 720 กรัม ✓ ต้องขึ้น\n- DJI Air 2S: 595 กรัม ✓ ต้องขึ้น\n- DJI Mavic 3 Pro: 958 กรัม ✓ ต้องขึ้น\n- DJI Mavic 3 Classic: 749 กรัม ✓ ต้องขึ้น\n- DJI Avata 2: 377 กรัม ✓ ต้องขึ้น\n- DJI Phantom 4 Pro V2: 1375 กรัม ✓ ต้องขึ้น\n- DJI Enterprise ทุกรุ่น ✓ ต้องขึ้น\n\nหมายเหตุ: แม้ Mini 4 Pro ไม่ต้องขึ้นทะเบียน แต่ยังต้องปฏิบัติตามกฎการบิน และถ้าบินรับเงินต้องมี RPL",
  },
];

export function matchKnowledgeDoc(message: string): KnowledgeDoc | undefined {
  const lower = message.toLowerCase();
  return knowledgeDocs.find((d) =>
    d.triggers.some((t) => lower.includes(t.toLowerCase()))
  );
}
